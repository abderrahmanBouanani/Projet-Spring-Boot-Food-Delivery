{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\admin\\\\OneDrive\\\\Bureau\\\\codes folder\\\\fd github\\\\food-deliver-app\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\admin\\\\OneDrive\\\\Bureau\\\\codes folder\\\\fd github\\\\food-deliver-app\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\admin\\\\OneDrive\\\\Bureau\\\\codes folder\\\\fd github\\\\food-deliver-app\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\admin\\\\OneDrive\\\\Bureau\\\\codes folder\\\\fd github\\\\food-deliver-app\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\admin\\\\OneDrive\\\\Bureau\\\\codes folder\\\\fd github\\\\food-deliver-app\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{Link}from\"react-router-dom\";import ClearIcon from'@material-ui/icons/Clear';import ExpandMoreIcon from'@material-ui/icons/ExpandMore';import Geocode from\"react-geocode\";import{Typography,Card,CardContent,IconButton,Grid,Divider,Collapse,Button,Box,TextField}from\"@material-ui/core\";import Rating from'@material-ui/lab/Rating';import DeleteIcon from'@material-ui/icons/Delete';import\"./Card.css\";import MapCard from\"./MapCard\";var axios=require('axios').default;Geocode.setApiKey(process.env.REACT_APP_API_KEY);Geocode.setRegion(\"us\");Geocode.enableDebug();var OrderCard=/*#__PURE__*/function(_React$Component){_inherits(OrderCard,_React$Component);var _super=_createSuper(OrderCard);function OrderCard(props){var _this;_classCallCheck(this,OrderCard);_this=_super.call(this,props);_this.state={dict:{},restaurant:undefined,customer:undefined,driver:undefined,expanded:false,resAddress:\"\",cusAddress:\"\",wrongAddress:false,rating:0,comment:\"\"};_this.orderInfo=_this.orderInfo.bind(_assertThisInitialized(_this));_this.fillDict=_this.fillDict.bind(_assertThisInitialized(_this));_this.handleExpandClick=_this.handleExpandClick.bind(_assertThisInitialized(_this));_this.deleteOrder=_this.deleteOrder.bind(_assertThisInitialized(_this));_this.acceptOrder=_this.acceptOrder.bind(_assertThisInitialized(_this));_this.finishOrder=_this.finishOrder.bind(_assertThisInitialized(_this));_this.deleteComment=_this.deleteComment.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.addComment=_this.addComment.bind(_assertThisInitialized(_this));return _this;}_createClass(OrderCard,[{key:\"componentDidMount\",value:function componentDidMount(){this.fillDict();this.orderInfo();}},{key:\"handleChange\",value:function handleChange(content){this.setState(content);}},{key:\"handleExpandClick\",value:function handleExpandClick(){this.setState({expanded:!this.state.expanded});}},{key:\"fillDict\",value:function fillDict(){var menu=this.props.order.content;var tempDict=this.state.dict;for(var i=0;i<menu.length;i++){if(tempDict[menu[i].dishName]===undefined){tempDict[menu[i].dishName]=1;}else{tempDict[menu[i].dishName]=tempDict[menu[i].dishName]+1;}}this.setState({dict:tempDict});}},{key:\"orderInfo\",value:function orderInfo(){var _this2=this;axios.get(\"/api/restaurant/\"+this.props.order.restaurantId).then(function(response){_this2.setState({restaurant:response.data});var resAddress=response.data.address+\",\"+response.data.city;Geocode.fromAddress(resAddress).then(function(res){var _res$results$0$geomet=res.results[0].geometry.location,lat=_res$results$0$geomet.lat,lng=_res$results$0$geomet.lng;_this2.setState({resAddress:lat+\",\"+lng});},function(error){_this2.setState({wrongAddress:true});});}).catch(function(err){return console.log(err);});axios.get(\"/api/customer/\"+this.props.order.customerId).then(function(response){_this2.setState({customer:response.data});var cusAddress=response.data.address+\",\"+response.data.city;Geocode.fromAddress(cusAddress).then(function(res){var _res$results$0$geomet2=res.results[0].geometry.location,lat=_res$results$0$geomet2.lat,lng=_res$results$0$geomet2.lng;_this2.setState({cusAddress:lat+\",\"+lng});},function(error){_this2.setState({wrongAddress:true});});}).catch(function(err){return console.log(err);});if(this.props.order.driverId){axios.get(\"/api/driver/\"+this.props.order.driverId).then(function(response){_this2.setState({driver:response.data});}).catch(function(err){return console.log(err);});}}},{key:\"deleteOrder\",value:function deleteOrder(){var _this3=this;axios.delete(\"/api/order/\"+this.props.order.id).then(function(response){_this3.props.getOrders();}).catch(function(err){return console.log(err);});}},{key:\"acceptOrder\",value:function acceptOrder(){var _this4=this;axios.post(\"/api/driver/accept\",{orderId:this.props.order.id,driverId:sessionStorage.getItem(\"userId\")}).then(function(response){_this4.props.getOrders();}).catch(function(err){return console.log(err);});}},{key:\"finishOrder\",value:function finishOrder(){var _this5=this;axios.post(\"/api/driver/finish\",{orderId:this.props.order.id}).then(function(response){_this5.props.getOrders();}).catch(function(err){return console.log(err);});}},{key:\"deleteComment\",value:function deleteComment(){var _this6=this;axios.delete(\"/api/order/deleteComment/\"+this.props.order.id).then(function(response){_this6.props.getOrders();}).catch(function(err){return console.log(err);});}},{key:\"addComment\",value:function addComment(){var _this7=this;axios.post(\"/api/order/addComment\",{orderId:this.props.order.id,rating:this.state.rating,content:this.state.comment}).then(function(response){_this7.props.getOrders();}).catch(function(err){return console.log(err);});}},{key:\"render\",value:function render(){var _this8=this;return this.state.dict&&this.state.restaurant&&this.state.customer?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Typography,{variant:\"body1\",style:{position:\"relative\",backgroundColor:\"#FAFAD2\"}},this.props.userType===\"customer\"?/*#__PURE__*/React.createElement(Link,{to:\"/customer/restaurant/\"+this.state.restaurant.id},/*#__PURE__*/React.createElement(\"img\",{className:\"orderCardImage\",src:this.state.restaurant.information.imageUrl,alt:this.state.restaurant.information.restaurantName})):null,/*#__PURE__*/React.createElement(\"i\",null,/*#__PURE__*/React.createElement(\"b\",null,\"Order from \",this.state.restaurant.information.restaurantName)),this.props.userType===\"customer\"&&!this.props.order.delivery?/*#__PURE__*/React.createElement(IconButton,{size:\"small\",style:{position:\"absolute\",right:\"0\"},onClick:this.deleteOrder},/*#__PURE__*/React.createElement(ClearIcon,null)):null),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(CardContent,null,Object.keys(this.state.dict).map(function(key){return/*#__PURE__*/React.createElement(Typography,{variant:\"body1\",color:\"textSecondary\",component:\"p\",key:key},/*#__PURE__*/React.createElement(\"i\",null,key),\" ... x \",_this8.state.dict[key]);}),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Grid,{container:true,direction:\"column\",alignItems:\"flex-end\",spacing:1},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(Typography,{variant:\"body1\",color:\"primary\"},/*#__PURE__*/React.createElement(\"i\",null,\"Subtotal : $ \",this.props.order.price))),this.props.userType===\"driver\"&&!this.props.order.delivery?/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(Button,{variant:\"outlined\",color:\"secondary\",size:\"small\",onClick:this.acceptOrder},\"Accept this order\")):null,this.props.userType===\"driver\"&&this.props.order.delivery&&this.props.order.endTime===null?/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(Button,{variant:\"outlined\",color:\"secondary\",size:\"small\",onClick:this.finishOrder},\"Finish the order\")):null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Divider,null)),/*#__PURE__*/React.createElement(IconButton,{onClick:this.handleExpandClick,\"aria-expanded\":this.state.expanded},/*#__PURE__*/React.createElement(Typography,null,/*#__PURE__*/React.createElement(\"b\",null,\"Check Order Status\")),/*#__PURE__*/React.createElement(ExpandMoreIcon,null)),/*#__PURE__*/React.createElement(Collapse,{in:this.state.expanded,timeout:\"auto\",unmountOnExit:true},/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(Typography,{color:\"textSecondary\",paragraph:true},/*#__PURE__*/React.createElement(\"i\",null,/*#__PURE__*/React.createElement(\"b\",null,\"From :\")),\" \",this.state.restaurant.address,\", \",this.state.restaurant.city,\", \",this.state.restaurant.state,\", \",this.state.restaurant.zip),/*#__PURE__*/React.createElement(Typography,{color:\"textSecondary\",paragraph:true},/*#__PURE__*/React.createElement(\"i\",null,/*#__PURE__*/React.createElement(\"b\",null,\"To :\")),\" \",this.state.customer.address,\", \",this.state.customer.city,\", \",this.state.customer.state,\", \",this.state.customer.zip),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(Typography,{color:\"textSecondary\",paragraph:true},/*#__PURE__*/React.createElement(\"i\",null,/*#__PURE__*/React.createElement(\"b\",null,\"Customer contact :\")),\" \",this.state.customer.phoneNumber),/*#__PURE__*/React.createElement(Typography,{color:\"textSecondary\",paragraph:true},/*#__PURE__*/React.createElement(\"i\",null,/*#__PURE__*/React.createElement(\"b\",null,\"Restaurant contact :\")),\" \",this.state.restaurant.phoneNumber),this.state.driver?/*#__PURE__*/React.createElement(Typography,{color:\"textSecondary\",paragraph:true},/*#__PURE__*/React.createElement(\"i\",null,/*#__PURE__*/React.createElement(\"b\",null,\"Driver contact :\")),\" \",this.state.driver.phoneNumber):null,this.props.order.startTime===null?/*#__PURE__*/React.createElement(Typography,{paragraph:true},/*#__PURE__*/React.createElement(\"i\",null,\"Waiting for checking out...\")):null,this.props.order.startTime!==null&&!this.props.order.delivery?/*#__PURE__*/React.createElement(Typography,{paragraph:true},/*#__PURE__*/React.createElement(\"i\",null,\"Waiting for a driver...\")):null,this.props.order.startTime!==null&&this.props.order.delivery&&this.props.order.endTime===null?/*#__PURE__*/React.createElement(Typography,{paragraph:true},/*#__PURE__*/React.createElement(\"i\",null,\"In delivery...\")):null,this.props.order.startTime!==null&&!this.props.order.delivery?/*#__PURE__*/React.createElement(Typography,{paragraph:true},/*#__PURE__*/React.createElement(\"i\",null,\"Order placed at \",new Date(Date.parse(this.props.order.startTime)).toLocaleString())):null,this.props.order.endTime!==null?/*#__PURE__*/React.createElement(Typography,{paragraph:true},/*#__PURE__*/React.createElement(\"i\",null,\"Order already arrived at \",new Date(Date.parse(this.props.order.endTime)).toLocaleString())):null,this.props.order.startTime!==null&&this.props.order.delivery&&this.state.wrongAddress?/*#__PURE__*/React.createElement(Typography,{variant:\"body1\",color:\"secondary\"},\"The address can't be loaded, please contact the driver for detailed route information\"):null,this.props.order.startTime!==null&&this.props.order.delivery&&!this.state.wrongAddress&&this.state.resAddress&&this.state.cusAddress?/*#__PURE__*/React.createElement(MapCard,{resAddress:this.state.resAddress,cusAddress:this.state.cusAddress}):null,/*#__PURE__*/React.createElement(Divider,null),this.props.userType===\"customer\"&&this.props.order.endTime!==null&&this.props.order.comment!==null?/*#__PURE__*/React.createElement(Box,{component:\"fieldset\",mb:3,borderColor:\"transparent\"},/*#__PURE__*/React.createElement(Rating,{name:\"read-only\",value:this.props.order.comment.rating,readOnly:true}),/*#__PURE__*/React.createElement(Typography,{color:\"textSecondary\",variant:\"body2\"},/*#__PURE__*/React.createElement(\"i\",null,this.props.order.comment.content)),/*#__PURE__*/React.createElement(IconButton,{onClick:this.deleteComment},/*#__PURE__*/React.createElement(DeleteIcon,null))):null,this.props.userType===\"customer\"&&this.props.order.endTime!==null&&this.props.order.comment===null?/*#__PURE__*/React.createElement(Box,{component:\"fieldset\",mb:3,borderColor:\"transparent\"},/*#__PURE__*/React.createElement(Typography,{component:\"legend\",variant:\"body2\"},/*#__PURE__*/React.createElement(\"i\",null,\"Rating : \")),/*#__PURE__*/React.createElement(Rating,{name:\"simple-controlled\",value:this.state.rating,onChange:function onChange(event){return _this8.handleChange({rating:event.target.value});}}),/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,label:\"Please add your comment\",type:\"text\",value:this.state.comment,onChange:function onChange(event){return _this8.handleChange({comment:event.target.value});}}),/*#__PURE__*/React.createElement(Button,{variant:\"outlined\",color:\"primary\",onClick:this.addComment,disabled:this.state.rating===0||this.state.comment===\"\"},/*#__PURE__*/React.createElement(\"b\",null,\"Add Comment\"))):null,this.props.userType===\"restaurant\"&&this.props.order.endTime!==null&&this.props.order.comment!==null?/*#__PURE__*/React.createElement(Box,{component:\"fieldset\",mb:3,borderColor:\"transparent\"},/*#__PURE__*/React.createElement(Rating,{name:\"read-only\",value:this.props.order.comment.rating,readOnly:true}),/*#__PURE__*/React.createElement(Typography,{color:\"textSecondary\",variant:\"body2\"},/*#__PURE__*/React.createElement(\"i\",null,this.props.order.comment.content))):null)))):/*#__PURE__*/React.createElement(\"div\",null);}}]);return OrderCard;}(React.Component);export default OrderCard;","map":{"version":3,"sources":["C:/Users/admin/OneDrive/Bureau/codes folder/fd github/food-deliver-app/front-end/src/components/card/OrderCard.jsx"],"names":["React","Link","ClearIcon","ExpandMoreIcon","Geocode","Typography","Card","CardContent","IconButton","Grid","Divider","Collapse","Button","Box","TextField","Rating","DeleteIcon","MapCard","axios","require","default","setApiKey","process","env","REACT_APP_API_KEY","setRegion","enableDebug","OrderCard","props","state","dict","restaurant","undefined","customer","driver","expanded","resAddress","cusAddress","wrongAddress","rating","comment","orderInfo","bind","fillDict","handleExpandClick","deleteOrder","acceptOrder","finishOrder","deleteComment","handleChange","addComment","content","setState","menu","order","tempDict","i","length","dishName","get","restaurantId","then","response","data","address","city","fromAddress","res","results","geometry","location","lat","lng","error","catch","err","console","log","customerId","driverId","delete","id","getOrders","post","orderId","sessionStorage","getItem","position","backgroundColor","userType","information","imageUrl","restaurantName","delivery","right","Object","keys","map","key","price","endTime","zip","phoneNumber","startTime","Date","parse","toLocaleString","event","target","value","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport Geocode from \"react-geocode\";\r\nimport {\r\n  Typography,\r\n  Card,\r\n  CardContent,\r\n  IconButton,\r\n  Grid,\r\n  Divider,\r\n  Collapse,\r\n  Button,\r\n  Box,\r\n  TextField\r\n      } from \"@material-ui/core\";\r\nimport Rating from '@material-ui/lab/Rating';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport \"./Card.css\";\r\nimport MapCard from \"./MapCard\";\r\nconst axios = require('axios').default;\r\nGeocode.setApiKey(process.env.REACT_APP_API_KEY);\r\nGeocode.setRegion(\"us\");\r\nGeocode.enableDebug();\r\n\r\nclass OrderCard extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      dict: {},\r\n      restaurant: undefined,\r\n      customer : undefined,\r\n      driver: undefined,\r\n      expanded: false,\r\n      resAddress : \"\",\r\n      cusAddress : \"\",\r\n      wrongAddress : false,\r\n      rating : 0,\r\n      comment : \"\"\r\n    }\r\n    this.orderInfo = this.orderInfo.bind(this);\r\n    this.fillDict = this.fillDict.bind(this);\r\n    this.handleExpandClick = this.handleExpandClick.bind(this);\r\n    this.deleteOrder = this.deleteOrder.bind(this);\r\n    this.acceptOrder = this.acceptOrder.bind(this);\r\n    this.finishOrder = this.finishOrder.bind(this);\r\n    this.deleteComment = this.deleteComment.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.addComment = this.addComment.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fillDict();\r\n    this.orderInfo();\r\n  }\r\n\r\n  handleChange(content) {\r\n    this.setState(content);\r\n  }\r\n\r\n  handleExpandClick() {\r\n    this.setState({expanded : !this.state.expanded});\r\n  }\r\n\r\n  fillDict() {\r\n    let menu = this.props.order.content;\r\n    let tempDict = this.state.dict;\r\n    for (let i = 0; i < menu.length; i++) {\r\n      if (tempDict[menu[i].dishName] === undefined) {\r\n        tempDict[menu[i].dishName] = 1;\r\n      } else {\r\n        tempDict[menu[i].dishName] = tempDict[menu[i].dishName] + 1;\r\n      }\r\n    }\r\n    this.setState({dict : tempDict});\r\n  }\r\n\r\n  orderInfo() {\r\n    axios.get(\"/api/restaurant/\" + this.props.order.restaurantId).then(\r\n      response => {\r\n        this.setState({restaurant: response.data});\r\n        let resAddress = response.data.address + \",\" + response.data.city;\r\n        Geocode.fromAddress(resAddress).then(\r\n          res => {\r\n            const { lat, lng } = res.results[0].geometry.location;\r\n            this.setState({resAddress : lat + \",\" + lng});\r\n          },\r\n          error => {\r\n            this.setState({wrongAddress : true});\r\n          }\r\n        );\r\n      }\r\n    ).catch(err => console.log(err));\r\n    axios.get(\"/api/customer/\" + this.props.order.customerId).then(\r\n      response => {\r\n        this.setState({customer: response.data});\r\n        let cusAddress = response.data.address + \",\" + response.data.city;\r\n        Geocode.fromAddress(cusAddress).then(\r\n          res => {\r\n            const { lat, lng } = res.results[0].geometry.location;\r\n            this.setState({cusAddress : lat + \",\" + lng});\r\n          },\r\n          error => {\r\n            this.setState({wrongAddress : true});\r\n          }\r\n        );\r\n      }\r\n    ).catch(err => console.log(err));\r\n    if (this.props.order.driverId) {\r\n      axios.get(\"/api/driver/\" + this.props.order.driverId).then(\r\n        response => {\r\n          this.setState({driver: response.data});\r\n        }\r\n      ).catch(err => console.log(err));\r\n    }\r\n  }\r\n\r\n  deleteOrder() {\r\n    axios.delete(\"/api/order/\" + this.props.order.id).then(\r\n      response => {\r\n        this.props.getOrders();\r\n      }\r\n    ).catch(err => console.log(err));\r\n  }\r\n\r\n  acceptOrder() {\r\n    axios.post(\"/api/driver/accept\", {\r\n      orderId : this.props.order.id,\r\n      driverId : sessionStorage.getItem(\"userId\")\r\n    }).then(\r\n      response => {\r\n        this.props.getOrders();\r\n      }\r\n    ).catch(err => console.log(err));\r\n  }\r\n\r\n  finishOrder() {\r\n    axios.post(\"/api/driver/finish\", {\r\n      orderId : this.props.order.id\r\n    }).then(\r\n      response => {\r\n        this.props.getOrders();\r\n      }\r\n    ).catch(err => console.log(err));\r\n  }\r\n\r\n  deleteComment() {\r\n    axios.delete(\"/api/order/deleteComment/\" + this.props.order.id).then(\r\n      response => {\r\n        this.props.getOrders();\r\n      }\r\n    ).catch(err => console.log(err));\r\n  }\r\n\r\n  addComment() {\r\n    axios.post(\"/api/order/addComment\", {\r\n      orderId : this.props.order.id,\r\n      rating : this.state.rating,\r\n      content : this.state.comment\r\n    }).then(\r\n      response => {\r\n        this.props.getOrders();\r\n      }\r\n    ).catch(err => console.log(err));\r\n  }\r\n\r\n  render() {\r\n    return this.state.dict && this.state.restaurant && this.state.customer ? (\r\n      <div>\r\n        <Card>\r\n          <Typography variant=\"body1\" style={{position : \"relative\", backgroundColor: \"#FAFAD2\"}} >\r\n            {this.props.userType === \"customer\" ? \r\n              <Link to={\"/customer/restaurant/\" + this.state.restaurant.id}>\r\n                <img className=\"orderCardImage\" src= {this.state.restaurant.information.imageUrl} alt={this.state.restaurant.information.restaurantName} />\r\n              </Link> : null\r\n            }\r\n            <i><b>Order from {this.state.restaurant.information.restaurantName}</b></i>\r\n            {this.props.userType === \"customer\" && !this.props.order.delivery ? (\r\n              <IconButton size=\"small\" style={{position : \"absolute\", right : \"0\"}} onClick={this.deleteOrder}>\r\n                <ClearIcon />\r\n              </IconButton>\r\n            ) : null}\r\n          </Typography>\r\n          <Divider />\r\n          <CardContent>\r\n            {Object.keys(this.state.dict).map(key => <Typography variant=\"body1\" color=\"textSecondary\" component=\"p\" key={key}><i>{key}</i> ... x {this.state.dict[key]}</Typography>)}\r\n            <Divider />\r\n            <br />\r\n            <Grid container direction=\"column\" alignItems=\"flex-end\" spacing={1}>\r\n              <Grid item xs={12}>\r\n                <Typography variant=\"body1\" color=\"primary\"><i>Subtotal : $ {this.props.order.price}</i></Typography>\r\n              </Grid>\r\n              {this.props.userType === \"driver\" && !this.props.order.delivery ? \r\n                <Grid item xs={12}>\r\n                  <Button variant=\"outlined\" color=\"secondary\" size=\"small\" onClick={this.acceptOrder}>\r\n                    Accept this order\r\n                  </Button>\r\n                </Grid> : null\r\n              }\r\n              {this.props.userType === \"driver\" && this.props.order.delivery && this.props.order.endTime === null ?\r\n                <Grid item xs={12}>\r\n                  <Button variant=\"outlined\" color=\"secondary\" size=\"small\" onClick={this.finishOrder}>\r\n                    Finish the order\r\n                  </Button>\r\n                </Grid> : null\r\n              }\r\n            </Grid>\r\n            <br />\r\n            <Divider />\r\n          </CardContent>\r\n          <IconButton\r\n            onClick={this.handleExpandClick}\r\n            aria-expanded={this.state.expanded}\r\n          >\r\n          <Typography><b>Check Order Status</b></Typography>\r\n            <ExpandMoreIcon />\r\n          </IconButton>\r\n          <Collapse in={this.state.expanded} timeout=\"auto\" unmountOnExit>\r\n            <CardContent>\r\n              <Typography color=\"textSecondary\" paragraph><i><b>From :</b></i> {this.state.restaurant.address}, {this.state.restaurant.city}, {this.state.restaurant.state}, {this.state.restaurant.zip}</Typography>\r\n              <Typography color=\"textSecondary\" paragraph><i><b>To :</b></i> {this.state.customer.address}, {this.state.customer.city}, {this.state.customer.state}, {this.state.customer.zip}</Typography>\r\n              <Divider />\r\n              <Typography color=\"textSecondary\" paragraph><i><b>Customer contact :</b></i> {this.state.customer.phoneNumber}</Typography>\r\n              <Typography color=\"textSecondary\" paragraph><i><b>Restaurant contact :</b></i> {this.state.restaurant.phoneNumber}</Typography>\r\n              {this.state.driver ? <Typography color=\"textSecondary\" paragraph><i><b>Driver contact :</b></i> {this.state.driver.phoneNumber}</Typography> : null}\r\n              {this.props.order.startTime === null ? (\r\n                <Typography paragraph><i>Waiting for checking out...</i></Typography>\r\n              ) : null}\r\n              {this.props.order.startTime !== null && !this.props.order.delivery ? (\r\n                <Typography paragraph><i>Waiting for a driver...</i></Typography>\r\n              ) : null}\r\n              {this.props.order.startTime !== null && this.props.order.delivery && this.props.order.endTime === null ? (\r\n                <Typography paragraph><i>In delivery...</i></Typography>\r\n              ) : null}\r\n              {this.props.order.startTime !== null && !this.props.order.delivery ? (\r\n                <Typography paragraph><i>Order placed at {new Date(Date.parse(this.props.order.startTime)).toLocaleString()}</i></Typography>\r\n              ) : null}\r\n              {this.props.order.endTime !== null ? (\r\n                <Typography paragraph><i>Order already arrived at {new Date(Date.parse(this.props.order.endTime)).toLocaleString()}</i></Typography>\r\n              ) : null}\r\n              {this.props.order.startTime !== null && this.props.order.delivery && this.state.wrongAddress ? <Typography variant=\"body1\" color=\"secondary\">The address can't be loaded, please contact the driver for detailed route information</Typography> : null}\r\n              {this.props.order.startTime !== null && this.props.order.delivery && !this.state.wrongAddress && this.state.resAddress && this.state.cusAddress ? <MapCard resAddress={this.state.resAddress} cusAddress={this.state.cusAddress} /> : null}\r\n              <Divider />\r\n              {this.props.userType === \"customer\" && this.props.order.endTime !== null && this.props.order.comment !== null ? (\r\n                <Box component=\"fieldset\" mb={3} borderColor=\"transparent\">\r\n                  <Rating name=\"read-only\" value={this.props.order.comment.rating} readOnly />\r\n                  <Typography color=\"textSecondary\" variant=\"body2\"><i>{this.props.order.comment.content}</i></Typography>\r\n                  <IconButton onClick={this.deleteComment}>\r\n                    <DeleteIcon />\r\n                  </IconButton>\r\n                </Box>\r\n              ) : null}\r\n              {this.props.userType === \"customer\" && this.props.order.endTime !== null && this.props.order.comment === null ? (\r\n                <Box component=\"fieldset\" mb={3} borderColor=\"transparent\">\r\n                  <Typography component=\"legend\" variant=\"body2\"><i>Rating : </i></Typography>\r\n                  <Rating name=\"simple-controlled\" value={this.state.rating} onChange={event => this.handleChange({rating: event.target.value})} />\r\n                  <TextField\r\n                    variant=\"outlined\"\r\n                    margin=\"normal\"\r\n                    required\r\n                    fullWidth\r\n                    label=\"Please add your comment\"\r\n                    type=\"text\"\r\n                    value={this.state.comment}\r\n                    onChange={event => this.handleChange({comment: event.target.value})}\r\n                  />\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    color=\"primary\"\r\n                    onClick={this.addComment}\r\n                    disabled={this.state.rating === 0 || this.state.comment === \"\"}\r\n                  >\r\n                    <b>Add Comment</b>\r\n                  </Button>\r\n                </Box>\r\n              ) : null}\r\n              {this.props.userType === \"restaurant\" && this.props.order.endTime !== null && this.props.order.comment !== null ? (\r\n                <Box component=\"fieldset\" mb={3} borderColor=\"transparent\">\r\n                  <Rating name=\"read-only\" value={this.props.order.comment.rating} readOnly />\r\n                  <Typography color=\"textSecondary\" variant=\"body2\"><i>{this.props.order.comment.content}</i></Typography>\r\n                </Box>\r\n              ) : null}\r\n            </CardContent>\r\n          </Collapse>\r\n        </Card>\r\n      </div>\r\n    ) : <div />;\r\n  }\r\n}\r\n\r\nexport default OrderCard;"]},"metadata":{},"sourceType":"module"}