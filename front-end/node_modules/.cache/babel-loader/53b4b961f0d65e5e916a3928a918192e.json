{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\admin\\\\OneDrive\\\\Bureau\\\\codes folder\\\\fd github\\\\food-deliver-app\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\admin\\\\OneDrive\\\\Bureau\\\\codes folder\\\\fd github\\\\food-deliver-app\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\admin\\\\OneDrive\\\\Bureau\\\\codes folder\\\\fd github\\\\food-deliver-app\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\admin\\\\OneDrive\\\\Bureau\\\\codes folder\\\\fd github\\\\food-deliver-app\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\admin\\\\OneDrive\\\\Bureau\\\\codes folder\\\\fd github\\\\food-deliver-app\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import{Grid,Typography,Button}from'@material-ui/core';import React from'react';import OrderCard from\"../../card/OrderCard\";var axios=require('axios').default;var ShopCart=/*#__PURE__*/function(_React$Component){_inherits(ShopCart,_React$Component);var _super=_createSuper(ShopCart);function ShopCart(props){var _this;_classCallCheck(this,ShopCart);_this=_super.call(this,props);_this.state={orders:undefined,isCheckingOut:false,checkoutError:null};_this.getCartOrders=_this.getCartOrders.bind(_assertThisInitialized(_this));_this.checkout=_this.checkout.bind(_assertThisInitialized(_this));return _this;}_createClass(ShopCart,[{key:\"componentDidMount\",value:function componentDidMount(){this.getCartOrders();}},{key:\"getCartOrders\",value:function getCartOrders(){var _this2=this;axios.get(\"/api/customer/myCart/\"+this.props.currentUser.id).then(function(response){_this2.setState({orders:response.data});}).catch(function(err){return console.log(err);});}},{key:\"checkout\",value:function checkout(){var _this3=this;this.setState({isCheckingOut:true,checkoutError:null});axios.post(\"/api/order/checkoutAll\",{orders:this.state.orders}).then(function(response){_this3.setState({isCheckingOut:false});if(response.data&&response.status===200){alert('Orders successfully checked out!');_this3.getCartOrders();}else{_this3.setState({checkoutError:'Checkout failed. Please try again.'});}}).catch(function(err){console.log(err);_this3.setState({isCheckingOut:false,checkoutError:'Error during checkout. Please try again.'});});}},{key:\"render\",value:function render(){var _this4=this;return this.props.currentUser&&this.state.orders?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Grid,{container:true,justify:\"space-evenly\",spacing:3},this.state.orders.length>0?this.state.orders.map(function(order){return/*#__PURE__*/React.createElement(Grid,{item:true,key:order.id,xs:5},/*#__PURE__*/React.createElement(OrderCard,{order:order,userType:_this4.props.currentUser.type,getOrders:_this4.getCartOrders}));}):/*#__PURE__*/React.createElement(Typography,{variant:\"h5\"},/*#__PURE__*/React.createElement(\"i\",null,\"Your Shopping Cart is Empty...\")),this.state.orders.length>0?/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(\"div\",{className:\"checkoutBox\"},/*#__PURE__*/React.createElement(Grid,{container:true,justify:\"flex-end\"},this.state.checkoutError&&/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(Typography,{color:\"error\",align:\"right\"},this.state.checkoutError)),/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Button,{variant:\"outlined\",color:\"secondary\",size:\"medium\",onClick:this.checkout,disabled:this.state.isCheckingOut},this.state.isCheckingOut?'Processing...':'Check out all orders'))))):null)):/*#__PURE__*/React.createElement(\"div\",null);}}]);return ShopCart;}(React.Component);export default ShopCart;","map":{"version":3,"sources":["C:/Users/admin/OneDrive/Bureau/codes folder/fd github/food-deliver-app/front-end/src/components/customerView/mainpage/ShopCart.jsx"],"names":["Grid","Typography","Button","React","OrderCard","axios","require","default","ShopCart","props","state","orders","undefined","isCheckingOut","checkoutError","getCartOrders","bind","checkout","get","currentUser","id","then","response","setState","data","catch","err","console","log","post","status","alert","length","map","order","type","Component"],"mappings":"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","sourcesContent":["import { Grid, Typography, Button } from '@material-ui/core';\r\nimport React from 'react';\r\nimport OrderCard from \"../../card/OrderCard\";\r\nconst axios = require('axios').default;\r\n\r\nclass ShopCart extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      orders: undefined,\r\n      isCheckingOut: false,\r\n      checkoutError: null\r\n    }\r\n    this.getCartOrders = this.getCartOrders.bind(this);\r\n    this.checkout = this.checkout.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getCartOrders();\r\n  }\r\n\r\n  getCartOrders() {\r\n    axios.get(\"/api/customer/myCart/\" + this.props.currentUser.id).then(\r\n      response => {\r\n        this.setState({orders: response.data});\r\n      }\r\n    ).catch(err => console.log(err));\r\n  }\r\n\r\n  checkout() {\r\n    this.setState({ isCheckingOut: true, checkoutError: null });\r\n    axios.post(\"/api/order/checkoutAll\", {orders : this.state.orders})\r\n      .then(response => {\r\n        this.setState({ isCheckingOut: false });\r\n        if (response.data && response.status === 200) {\r\n          alert('Orders successfully checked out!');\r\n          this.getCartOrders();\r\n        } else {\r\n          this.setState({ \r\n            checkoutError: 'Checkout failed. Please try again.' \r\n          });\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n        this.setState({ \r\n          isCheckingOut: false,\r\n          checkoutError: 'Error during checkout. Please try again.' \r\n        });\r\n      });\r\n  }\r\n\r\n  render() {\r\n    return this.props.currentUser && this.state.orders ? (\r\n      <div>\r\n        <Grid container justify=\"space-evenly\" spacing={3}>\r\n          {this.state.orders.length > 0 ? this.state.orders.map(order => (\r\n            <Grid item key={order.id} xs={5}>\r\n              <OrderCard order={order} userType={this.props.currentUser.type} getOrders={this.getCartOrders} />\r\n            </Grid>\r\n          )) : <Typography variant=\"h5\"><i>Your Shopping Cart is Empty...</i></Typography>}\r\n          {this.state.orders.length > 0 ? (\r\n            <Grid item xs={12}>\r\n              <div className=\"checkoutBox\">\r\n                <Grid container justify=\"flex-end\">\r\n                  {this.state.checkoutError && (\r\n                    <Grid item xs={12}>\r\n                      <Typography color=\"error\" align=\"right\">\r\n                        {this.state.checkoutError}\r\n                      </Typography>\r\n                    </Grid>\r\n                  )}\r\n                  <Grid item>\r\n                    <Button \r\n                      variant=\"outlined\" \r\n                      color=\"secondary\" \r\n                      size=\"medium\" \r\n                      onClick={this.checkout}\r\n                      disabled={this.state.isCheckingOut}\r\n                    >\r\n                      {this.state.isCheckingOut ? 'Processing...' : 'Check out all orders'}\r\n                    </Button>\r\n                  </Grid>\r\n                </Grid>\r\n              </div>\r\n            </Grid>\r\n          ) : null}\r\n        </Grid>\r\n      </div>\r\n    ) : <div />\r\n  }\r\n}\r\n\r\nexport default ShopCart;"]},"metadata":{},"sourceType":"module"}