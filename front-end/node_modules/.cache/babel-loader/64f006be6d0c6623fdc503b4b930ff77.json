{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\admin\\\\OneDrive\\\\Bureau\\\\codes folder\\\\fd github\\\\food-deliver-app\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\admin\\\\OneDrive\\\\Bureau\\\\codes folder\\\\fd github\\\\food-deliver-app\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\admin\\\\OneDrive\\\\Bureau\\\\codes folder\\\\fd github\\\\food-deliver-app\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\admin\\\\OneDrive\\\\Bureau\\\\codes folder\\\\fd github\\\\food-deliver-app\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\admin\\\\OneDrive\\\\Bureau\\\\codes folder\\\\fd github\\\\food-deliver-app\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import TopBar from'../topbar/Topbar';import Login from'../login/Login';import Register from'../register/Register';import CustomerView from'../customerView/CustomerView';import DriverView from'../driverView/DriverView';import RestaurantView from'../restaurantView/RestaurantView';import{HashRouter as Router,Route,Switch,Redirect}from'react-router-dom';import{Grid}from'@material-ui/core';import'./Main.css';var axios=require('axios').default;var Main=/*#__PURE__*/function(_React$Component){_inherits(Main,_React$Component);var _super=_createSuper(Main);function Main(props){var _this;_classCallCheck(this,Main);_this=_super.call(this,props);_this.state={userId:sessionStorage.getItem(\"userId\"),userType:sessionStorage.getItem(\"userType\"),currentUser:undefined,view:\"Home\"};_this.getCurrentUser=_this.getCurrentUser.bind(_assertThisInitialized(_this));_this.changeUser=_this.changeUser.bind(_assertThisInitialized(_this));_this.changeView=_this.changeView.bind(_assertThisInitialized(_this));return _this;}_createClass(Main,[{key:\"componentDidMount\",value:function componentDidMount(){this.getCurrentUser();}},{key:\"getCurrentUser\",value:function getCurrentUser(){var _this2=this;if(this.state.userId&&this.state.userType){axios.get(\"/api/\"+this.state.userType+\"/\"+this.state.userId).then(function(response){_this2.setState({currentUser:response.data});}).catch(function(err){return console.log(err);});}}},{key:\"changeUser\",value:function changeUser(newUser,action){this.setState({currentUser:newUser});if(action===\"login\"){this.setState({userId:newUser.id,userType:newUser.type});sessionStorage.setItem(\"userId\",newUser.id);sessionStorage.setItem(\"userType\",newUser.type);}else if(action===\"logout\"){sessionStorage.clear();this.setState({userId:undefined,userType:undefined});}}},{key:\"changeView\",value:function changeView(type){this.setState({view:type+\"'s View\"});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(Grid,{container:true,justify:\"flex-start\"},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(TopBar,{changeUser:this.changeUser,view:this.state.view,currentUser:this.state.currentUser})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(\"div\",{className:\"grid-main\"},/*#__PURE__*/React.createElement(Switch,null,this.state.userType&&this.state.userType===\"customer\"?/*#__PURE__*/React.createElement(Route,{path:\"/customer\",render:function render(props){return/*#__PURE__*/React.createElement(CustomerView,Object.assign({},props,{currentUser:_this3.state.currentUser,changeView:_this3.changeView}));}}):/*#__PURE__*/React.createElement(Redirect,{path:\"/customer\",to:\"/login\"}),this.state.userType&&this.state.userType===\"driver\"?/*#__PURE__*/React.createElement(Route,{path:\"/driver\",render:function render(props){return/*#__PURE__*/React.createElement(DriverView,Object.assign({},props,{currentUser:_this3.state.currentUser,changeView:_this3.changeView}));}}):/*#__PURE__*/React.createElement(Redirect,{path:\"/driver\",to:\"/login\"}),this.state.userType&&this.state.userType===\"restaurant\"?/*#__PURE__*/React.createElement(Route,{path:\"/restaurant\",render:function render(props){return/*#__PURE__*/React.createElement(RestaurantView,Object.assign({},props,{currentUser:_this3.state.currentUser,changeView:_this3.changeView}));}}):/*#__PURE__*/React.createElement(Redirect,{path:\"/restaurant\",to:\"/login\"}),!this.state.userType?/*#__PURE__*/React.createElement(Route,{path:\"/login\",render:function render(props){return/*#__PURE__*/React.createElement(Login,Object.assign({},props,{changeUser:_this3.changeUser}));}}):/*#__PURE__*/React.createElement(Redirect,{path:\"/login\",to:\"/\"+this.state.userType}),!this.state.userType?/*#__PURE__*/React.createElement(Route,{path:\"/register\",render:function render(props){return/*#__PURE__*/React.createElement(Register,Object.assign({},props,{changeUser:_this3.changeUser}));}}):/*#__PURE__*/React.createElement(Redirect,{path:\"/register\",to:\"/\"+this.state.userType}),/*#__PURE__*/React.createElement(Redirect,{path:\"/\",to:\"/login\"}))))));}}]);return Main;}(React.Component);export default Main;","map":{"version":3,"sources":["C:/Users/admin/OneDrive/Bureau/codes folder/fd github/food-deliver-app/front-end/src/components/main/Main.jsx"],"names":["React","TopBar","Login","Register","CustomerView","DriverView","RestaurantView","HashRouter","Router","Route","Switch","Redirect","Grid","axios","require","default","Main","props","state","userId","sessionStorage","getItem","userType","currentUser","undefined","view","getCurrentUser","bind","changeUser","changeView","get","then","response","setState","data","catch","err","console","log","newUser","action","id","type","setItem","clear","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport TopBar from '../topbar/Topbar';\r\nimport Login from '../login/Login';\r\nimport Register from '../register/Register';\r\nimport CustomerView from '../customerView/CustomerView';\r\nimport DriverView from '../driverView/DriverView';\r\nimport RestaurantView from '../restaurantView/RestaurantView';\r\nimport { HashRouter as Router, Route, Switch, Redirect } from 'react-router-dom';\r\nimport {\r\n  Grid\r\n} from '@material-ui/core';\r\nimport './Main.css';\r\nconst axios = require('axios').default;\r\n\r\nclass Main extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      userId: sessionStorage.getItem(\"userId\"),\r\n      userType: sessionStorage.getItem(\"userType\"),\r\n      currentUser: undefined,\r\n      view: \"Home\"\r\n    }\r\n    this.getCurrentUser = this.getCurrentUser.bind(this);\r\n    this.changeUser = this.changeUser.bind(this);\r\n    this.changeView = this.changeView.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getCurrentUser();\r\n  }\r\n\r\n  getCurrentUser() {\r\n    if (this.state.userId && this.state.userType) {\r\n      axios.get(\"/api/\" + this.state.userType + \"/\" + this.state.userId).then(\r\n        response => {\r\n          this.setState({currentUser: response.data})\r\n        }\r\n      ).catch(err => console.log(err));\r\n    }\r\n  }\r\n\r\n  changeUser(newUser, action) {\r\n    this.setState({currentUser: newUser});\r\n    if (action === \"login\") {\r\n      this.setState({userId: newUser.id, userType: newUser.type});\r\n      sessionStorage.setItem(\"userId\", newUser.id);\r\n      sessionStorage.setItem(\"userType\", newUser.type);\r\n    } else if (action === \"logout\") {\r\n      sessionStorage.clear();\r\n      this.setState({userId: undefined, userType: undefined});\r\n    }\r\n  }\r\n\r\n  changeView(type) {\r\n    this.setState({view: type + \"'s View\"});\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Router>\r\n        <Grid container justify=\"flex-start\">\r\n          <Grid item xs={12}>\r\n            <TopBar changeUser={this.changeUser} view={this.state.view} currentUser={this.state.currentUser} />\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <div className=\"grid-main\">\r\n              <Switch>\r\n                {this.state.userType && this.state.userType === \"customer\" ? (\r\n                  <Route path=\"/customer\" render={props => <CustomerView {...props} currentUser={this.state.currentUser} changeView={this.changeView} />} />\r\n                ) : (\r\n                  <Redirect path=\"/customer\" to=\"/login\" />\r\n                )}\r\n                {this.state.userType && this.state.userType === \"driver\" ? (\r\n                  <Route path=\"/driver\" render={props => <DriverView {...props} currentUser={this.state.currentUser} changeView={this.changeView} />} />\r\n                ) : (\r\n                  <Redirect path=\"/driver\" to=\"/login\" />\r\n                )}\r\n                {this.state.userType && this.state.userType === \"restaurant\" ? (\r\n                  <Route path=\"/restaurant\" render={props => <RestaurantView {...props} currentUser={this.state.currentUser} changeView={this.changeView} />} />\r\n                ) : (\r\n                  <Redirect path=\"/restaurant\" to=\"/login\" />\r\n                )}\r\n                {!this.state.userType ? (\r\n                  <Route path=\"/login\" render={props => <Login {...props} changeUser={this.changeUser} />} />\r\n                ) : (\r\n                  <Redirect path=\"/login\" to={\"/\" + this.state.userType} />\r\n                )}\r\n                {!this.state.userType ? (\r\n                  <Route path=\"/register\" render={props => <Register {...props} changeUser={this.changeUser} />} />\r\n                ) : (\r\n                  <Redirect path=\"/register\" to={\"/\" + this.state.userType} />\r\n                )}\r\n                <Redirect path=\"/\" to={\"/login\"} />\r\n              </Switch>\r\n            </div>\r\n          </Grid>\r\n        </Grid>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Main;"]},"metadata":{},"sourceType":"module"}